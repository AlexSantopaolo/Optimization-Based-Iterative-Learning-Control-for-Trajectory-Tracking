<h1>Optimization-Based Iterative Learning Control for Trajectory Tracking</h1>
<h2>Project description:</h2>

In this project an iterative learning controller is realized and tested on a Cart-Pole system. Starting from a feasible swing-up trajectory, at each trial, the uncertainties over the dynamics parameters of the model are estimated and incorporated in the controller formulation during the next iteration. Simulation implemented in Matlab.
<h3>File details:</h3>


- [MAIN.M](main.m) : is the main file.

1. Section A: there is an INIT.M call to initialize the parameters. 
1. Section B: Using get_optimal_trajectory function a NPLMC algotithm is run to find the ideal trajectory. There is the plotting of Ideal trajectory. 
1. Section C: Number of simulation for ILC to converge.
1. Section D: Setted up the real nominal condition that varies at each iteration. First simulation run with optimal input. Computed Lifted representation. Initilization of Kalman filter matrices and cycle with simulation. Run control step using fmicon. Computed each simulation trajectory and plotted all of them.

* INIT.M: Parameters initialization.

* PENDULUM_ur_CT0: Function with continuos time cart-pendulum equations of motion with nominal parameter.

* PENDULUM_ur_CT0_real: Function with continuos time cart-pendulum equations of motion with real parameters.

* PENDULUM_ur_DT0: Function with discrete time cart-pendulum equations of motions using Euler method. (Nominal parameter setup)

* PENDULUM_ur_DT0_real: Function with discrete time cart-pendulum equations of motions using Euler method. (Real parameters setup).

* Plot_trajectory: Script to plot in a same images plots of cart position, cart velocity, pendulum angle, pendulum velocity and input with respect to time.

* Plot_trajectories: Script to plot cart position, cart velocity, pendulumangle, pendulum velocity and input with respect to time for each single trial in the same image.

* Get_Fd_contr: Script to get F and D matrices related to angle position dynamics.

* get_jacobians: Script to get A and B matrices for state space model computing at each time istant the jacobians.

* get_lifted_repr: Algorithm to compute F,G and D_0 given column vectors of all state and input. F and G represent the model dyamics. Algorithm present in the report.

* get_optimal_trajectory: Script to run the NLMPC and get optimal trajectory. Implementation details in the report.

* nonlinearconstraints: Constraints of cart position and cart velocity due to rail length and cart actuator. Used to run fmincon algorithm.

> For further detail open the [ Project_Report](Report_Project.pdf)
[![Watch the video](data:image/png;base64,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)](https://youtu.be/KscG354lbqI)
